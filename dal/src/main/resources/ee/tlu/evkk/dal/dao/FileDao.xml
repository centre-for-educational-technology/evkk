<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ee.tlu.evkk.dal.dao.FileDao">

    <select id="insert" flushCache="true" resultType="java.util.UUID">
        INSERT INTO core.file (
          file_id,
          oid,
          name,
          content_type,
          created_at
        ) VALUES (
          COALESCE(#{file.fileId}, uuid_generate_v4()),
          #{file.oid},
          #{file.name},
          #{file.contentType},
          #{file.createdAt}
        ) RETURNING file_id;
    </select>

    <select id="getById" resultType="ee.tlu.evkk.dal.dto.File">
        SELECT *
          FROM core.file
         WHERE file_id = #{id};
    </select>

</mapper>